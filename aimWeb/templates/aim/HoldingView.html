{% extends "bootstrap.html" %}

{% block body %}
	<div class="page-header">
		{% if not object.id %} 
			<h1> New Holding </h1>
		{% else %}
			<h1> {{object.symbol}} 
			<small> {{object.symbol.description}} </small>
			in <small>{{object.portfolio}} </small>
			</h1>
		{% endif %}
		
	</div>

	<form role="form" action="." method="post" >{% csrf_token %}
		<div class="panel panel-primary">
			<div class="panel-heading">
				General
			</div>
			
			<div class="panel-body">
		    {% for field in form %}
		        <div class="form-group">
		            {{ field.errors }}
		            {{ field.label_tag }} {{ field }}
		        </div>
		    {% endfor %}

			</div>
			<div class="panel-footer">
				  <input type="submit" name="_holding" class="btn btn-primary pull-right"></button>
				  <div class="clearfix"></div>
			</div>
			
		</div>
	</form>

	<div class="panel panel-primary">
		<div class="panel-heading">Transactions</div>
		<div class="panel-body">
			<table class="table">
				<thead>
					<tr>
						<th>Date</th>
						<th>Type</th>
						<th>Qty</th>
						<th>Price</th>
						<th>Total</th>
					</tr>
				</thead>
				<tbody>
					{% for t in object.transaction_set.all %}
					<tr {% if t.type == "Buy" %} class="success" %} {% else %} class="danger" %} {% endif %} >
						<td>{{t.date}}</td>
						<td>{{t.type}}</td>
						<td>{{t.shares}}</td>
						<td>{{t.price}}</td>
						<td>{{t.total_sale}}</td>
					</tr>
					{% endfor %}
					
					
				</tbody>		
		
			</table>
		</div>
	</div>
	
	<form role="form" action="." method="post" >{% csrf_token %}
		<div class="panel panel-primary">
			<div class="panel-heading">AIM Control parameters</div>
			<div class="panel-body">
			    {% for field in controlform %}
			        <div class="form-group">
			            {{ field.errors }}
			            {{ field.label_tag }} {{ field }}
			        </div>
			    {% endfor %}

			</div>
			<div class="panel-footer">
				  <input type="submit" name="_control" class="btn btn-primary pull-right"></button>
				  <div class="clearfix"></div>
			</div>
		</div>
	</form>
	

{% if false %}	
	{{ form.non_field_errors }}

	<form role="form" action="." method="post">{% csrf_token %}
	{{form.as_p}}
			<div class="panel-footer">
				  <button type="submit" class="btn btn-primary pull-right">Submit</button>
				  <div class="clearfix"></div>
			</div>
	</form>

	<form role="form" action="." method="post">{% csrf_token %}
		<div class="panel panel-primary">
			<div class="panel-heading">
				General
			</div>
			
			<div class="panel-body">
				<div class="row">
					<div class="col-md-4">
						<label for="{{form.symbol.label}}">{{form.symbol.label}}</label>
						<input class="form-control" id="{{form.symbol.id_for_label}}" name="{{form.symbol.name}}">
					</div>

					
					<div class="col-md-4">
						<label>{{form.portfolio.label}}</label>
						<select class="form-control" id="{{form.portfolio.id_for_label}}" name="{{form.portfolio.name}}">

						{% for choice in form.portfolio.field.choices %}

							{% if choice.0 == form.portfolio.field.initial %}
								<option selected="selected">{{choice.1}}</option>
							{% else %}
								<option value="{{choice.0}}">{{choice.1}}</option>
							{% endif %}
							
						{% endfor %}
						</select>
					</div>
				</div>
				
				<div class="row">
					<div class="col-md-8">
						<label>{{form.reason.label}}</label>
						<input class="form-control" id="{{form.reason.id_for_label}}">
					</div>
				</div>
				
			</div>
			
			<div class="panel-footer">
				  <button type="submit" class="btn btn-primary pull-right">Submit</button>
				  <div class="clearfix"></div>
			</div>
		</div>
	</form>

{% endif %}

{% if form.id %} 
	
	<form role="form">
		<div class="panel panel-info">
			<div class="panel-heading">General Panel form</div>
			<div class="panel-body">
					<div class="row col-md-4">
								<label>.col-md-4</label>
								<input class="form-control" id="field1" placeholder="field1">
						<div class="col-md-4">
								<label>.col-md-4</label>
								<input class="form-control" id="field2" placeholder="field2">
						</div>
					</div>
					<div class="row">
						<div class="col-md-6">
								<label>.col-md-8</label>
								<input class="form-control" id="field1" placeholder="field1">
						</div>
						<div class="col-md-6">
								<label>.col-md-8</label>
								<input class="form-control" id="field2" placeholder="field2">
						</div>
					</div>
					<div class="row">
						<div class="col-md-4">
								<label>.col-md-4</label>
								<input class="form-control" id="field1" placeholder="field1">
						</div>
						<div class="col-md-8">
								<label>.col-md-8</label>
								<input class="form-control" id="field2" placeholder="field2">
						</div>
					</div>
	
			</div>
			<div class="panel-footer">
				  <button type="submit" class="btn btn-default pull-right">Submit</button>
				  <div class="clearfix"></div>
			</div>
		</div>
	</form>
	
	
	
	<div class="panel panel-default">
	  <div class="panel-heading">
	    <h3 class="panel-title">Panel title</h3>
	  </div>
	  <div class="panel-body">
	    Panel content
	  </div>
	</div>

{% endif %}
	
{% endblock %}